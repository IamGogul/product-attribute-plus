"use strict";var $=jQuery.noConflict();(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}function r(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}var o=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=$.extend(!0,{productAttrTypeSelector:"#attribute_type",productAttrTypeAddFormFields:".js-product-attribute-plus-add-field",productAttrTypeEditFormFields:".js-product-attribute-plus-edit-field"},e),this._init()},(r=[{key:"_init",value:function(){var t=this.options,e=t.jQBodyEle,r=t.productAttrTypeSelector,o=t.productAttrTypeAddFormFields,n=t.productAttrTypeEditFormFields,i=$(r,e),a=$(o,e),u=$(n,e);i.length>0&&i.on("change",(function(){switch($(this).val()){case"product-attribute-plus-color-sw":case"product-attribute-plus-image-sw":case"product-attribute-plus-label-sw":a.show(),u.show();break;default:a.hide(),u.hide()}})).trigger("change")}}])&&e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}();function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function a(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}var u=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=$.extend(!0,{},e)},(e=[{key:"_handler",value:function(t,e){t.on("change",(function(){var t=$(this),r=t.closest("tbody").find(e).closest("tr");t.is(":checked")?r.show():r.hide()})).trigger("change")}}])&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,s(o.key),o)}}function s(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}var p=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=$.extend(!0,{vProductSettingsHandler:"#product_attr_plus_manage_swatch_vproduct",vProductSettingsSelector:".product-attribute-plus-manage-swatch-vproduct-field"},e),this._init()},(e=[{key:"_init",value:function(){this._swatchHandler()}},{key:"_swatchHandler",value:function(){var t=this.options,e=t.jQBodyEle,r=t.vProductSettingsHandler,o=t.vProductSettingsSelector,n=$(r,e);n.length>0&&(new u)._handler(n,o)}}])&&l(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function y(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,m(o.key),o)}}function m(t){var e=function(t){if("object"!=f(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:e+""}var d=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=this;r.options=$.extend(!0,{colorSwatch:".product-attribute-plus-color-picker"},e),$(document).ready((function(){r._swatch()})),$(document).ajaxComplete(r._ajaxComplete)},(e=[{key:"_swatch",value:function(){var t=this.options.colorSwatch,e=$(t);e.length>0&&e.wpColorPicker()}},{key:"_ajaxComplete",value:function(t,e,r){if(r.hasOwnProperty("data")&&0<=r.data.indexOf("product-attribute-plus-color-sw")){if(e&&4===e.readyState&&200===e.status&&r.data&&0<=r.data.indexOf("action=add-tag")){var o=wpAjax.parseAjaxResponse(e.responseXML,"ajax-response");if(!o||o.errors)return}$(".wp-color-result").removeAttr("style"),$(".wp-picker-clear").trigger("click")}}}])&&y(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function v(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,w(o.key),o)}}function w(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}var h=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=this;r.options=$.extend(!0,{imgSwatchBtn:".attribute-screen.product-attribute-plus-sw-image-button",imgSwatchRemoveBtn:".attribute-screen.product-attribute-plus-sw-image-img-remove"},e),$(document).ready((function(){r.options.jQBodyEle=$("body"),r._init()})),$(document).ajaxComplete(r._ajaxComplete)},(e=[{key:"_init",value:function(){var t=this,e=t.options,r=e.imgSwatchBtn,o=e.imgSwatchRemoveBtn;t._imgSwatchBtnHandler(r),t._imgSwatchRemoveHandler(o)}},{key:"_imgSwatchBtnHandler",value:function(t){var e;$("body").on("click",t,(function(t){t.preventDefault();var r=$(this);e||(e=wp.media({title:r.data("title"),multiple:!1,library:{type:"image"},button:{text:r.data("button")}})).on("select",(function(){var t=e.state().get("selection").first().toJSON(),o=t.sizes.thumbnail?t.sizes.thumbnail.url:t.url,n=t.id,i='<div class="product-attribute-plus-sw-image-img-holder"><div class="product-attribute-plus-sw-image-img"><img src="'+o+'"/><a href="javascript:void(0);" class="attribute-screen product-attribute-plus-sw-image-img-remove" title="'+r.data("remove")+'"></a></div>';r.siblings("input.product-attribute-plus-sw-image-id").val(n),$(i).insertBefore(r.parent()),setTimeout((function(){r.addClass("hidden")}),10)})),e.open()}))}},{key:"_imgSwatchRemoveHandler",value:function(t){$("body").on("click",t,(function(t){t.preventDefault();var e=$(this),r=e.parents(".product-attribute-plus-sw-image-img-holder").next(".product-attribute-plus-sw-image-img-picker");r.find(".product-attribute-plus-sw-image-id").val(""),r.find(".product-attribute-plus-sw-image-button").removeClass("hidden"),e.parents(".product-attribute-plus-sw-image-img-holder").remove()}))}},{key:"_ajaxComplete",value:function(t,e,r){if(r.hasOwnProperty("data")&&(console.log(r.data),0<=r.data.indexOf("product-attribute-plus-image-sw")&&e&&4===e.readyState&&200===e.status&&r.data&&0<=r.data.indexOf("action=add-tag"))){var o=wpAjax.parseAjaxResponse(e.responseXML,"ajax-response");if(!o||o.errors)return;$("input.product-attribute-plus-sw-image-id").val(""),$(".product-attribute-plus-sw-image-img-holder").remove(),$(".product-attribute-plus-sw-image-button").removeClass("hidden")}}}])&&v(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function S(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,j(o.key),o)}}function j(t){var e=function(t){if("object"!=g(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:e+""}new(function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=$.extend(!0,{pluginName:product_attribute_plus_l10n.pluginName,pluginVersion:product_attribute_plus_l10n.pluginVersion},e),this._init()},(e=[{key:"_init",value:function(){var t=this;t.options.jQBodyEle=$("body"),t.options.bodyEle=document.querySelector("body"),new o(t.options),new d(t.options),new h(t.options),new p(t.options)}}])&&S(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}())})();